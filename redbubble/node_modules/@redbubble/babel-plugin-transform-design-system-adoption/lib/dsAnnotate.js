"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _react = _interopRequireDefault(require("react"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/*
 * This function is wrapped around any expression that is a child of a design system component
 *
 * <DesignSystemComponent>
 *   { dsAnnotate(expression) }
 * </DesignSystemComponent>
 *
 */
const dsAnnotate = (expression, designSystemTags = []) => {
  // e.g. expression = <div>Text</div>
  if (_react.default.isValidElement(expression)) {
    const name = typeof expression.type === 'string' ? expression.type : expression.type.name;
    if (designSystemTags.includes(name)) return expression;
    return _react.default.cloneElement(expression, {
      'data-react-ds-adoption': true
    });
  }
  /*
   * e.g. expression = [
   *   <div>Text</div>,
   *   <div>Text</div>,
   * ]
   *
   * e.g. expression = items.map(x => <div>{x}</div>)
   *
   */


  if (Array.isArray(expression)) {
    return expression.map(i => dsAnnotate(i, designSystemTags));
  } // e.g. expression = (arg) => <div>{ arg }</div>


  if (typeof expression === 'function') {
    return (...args) => {
      const result = expression(...args);
      return dsAnnotate(result, designSystemTags);
    };
  } // otherwise leave it alone


  return expression;
};

var _default = dsAnnotate;
exports.default = _default;