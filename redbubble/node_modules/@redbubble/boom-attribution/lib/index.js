'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});
const noop = () => {};

const BEACON_SUPPORTED = typeof navigator !== 'undefined' && typeof navigator.sendBeacon === 'function';

const tracker = (sessionContext, attributionEndpoint, beacon) => {
  if (!beacon && !BEACON_SUPPORTED) return noop;
  if (!attributionEndpoint) return noop;
  if (sessionContext.isBot) return noop;

  return args => {
    if (beacon) {
      beacon(attributionEndpoint, JSON.stringify(args));
    } else if (BEACON_SUPPORTED) {
      navigator.sendBeacon(attributionEndpoint, JSON.stringify(args));
    }
  };
};

exports.default = tracker;